<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title></title>
        <script type="importmap">
            {
                "imports": {
                    "tweakpane": "../node_modules/tweakpane/dist/tweakpane.js",
                    "@tweakpane/core": "../node_modules/@tweakpane/core/dist/index.js"
                }
            }
        </script>
        <style>
            /* size manipulation according to: https://github.com/cocopon/tweakpane/issues/46#issuecomment-633388907  */

            /* Default wrapper view */
            .tableContainer {
                width: 450px;
            }

            /* Blades view */
            .tableContainer .tp-lblv_v {
                min-width: fit-content;
            }

            .tp-lblv_l {
                min-width: fit-content;
            }
        </style>
    </head>
    <body>
        <script type="module">
            import { Pane } from '../node_modules/tweakpane/dist/tweakpane.js';
            import { plugins as TweakpaneTablePlugin } from '../dist/tweakpane-table.mjs';

            const rootElm = document.createElement('div');
            rootElm.classList = 'tableContainer';
            document.body.appendChild(rootElm);
            const params = {
                prop: 3,
            };
            // const pane = new Pane({ container: rootElm });
            const pane = new Pane();
            pane.element.parentElement.classList = 'tableContainer';

            // Register plugin (v4 ES module)
            pane.registerPlugin(TweakpaneTablePlugin);

            pane.addBlade({
                view: 'tableHead',
                label: 'Effects',
                headers: [
                    { label: 'Name', width: '100px' },
                    { label: 'Type', width: '50px' },
                    { label: 'Link', width: '50px' },
                    { label: 'Trigger', width: '50px' },
                    { label: 'Delete', width: '50px' },
                ],
            });
            for (let i = 0; i < 3; i++) {
                const row = pane.addBlade({
                    view: 'tableRow',
                    label: `#${i}`,
                    cells: [],
                });
                // Use new addCell() API instead of getPane().addBlade()
                row.addCell({
                    view: 'text',
                    width: '100px',
                    parse: (v) => String(v),
                    value: `effect-0${i}`,
                });
                row.addCell({
                    view: 'list',
                    width: '50px',
                    options: [],
                    value: '',
                });
                row.addCell({
                    view: 'list',
                    width: '50px',
                    options: [],
                    value: '',
                });
                row.addCell({
                    view: 'button',
                    title: 'trig',
                    width: '50px',
                });
                row.addCell({
                    view: 'button',
                    title: 'del',
                    width: '50px',
                });
            }
            pane.addButton({
                title: 'add',
                width: '50px',
            });
            window.pane = pane;
        </script>
    </body>
</html>
